<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <title>📦 Estoque Headset</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#6a53f2" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
  <link rel="apple-touch-icon" href="icon-192.png" />

  <style>
    :root{--violet:#6a53f2;--ink:#0f1431;--muted:#6f74a5;--bg:#f6f6ff;--shadow:0 25px 60px rgba(106,83,242,.18),0 8px 24px rgba(106,83,242,.12)}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:#fafaff;display:grid;place-items:center;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial}
    .card{width:min(680px,88vw);background:#fff;border:1px solid #efe9ff;border-radius:20px;box-shadow:var(--shadow);padding:28px}
    h1{margin:0 0 8px;font-size:clamp(20px,3.4vw,28px);color:var(--ink);display:flex;align-items:center;gap:10px}
    .hint{color:var(--muted);margin:0 0 18px}
    .btn{display:inline-block;border:0;border-radius:12px;padding:.9rem 1.2rem;background:linear-gradient(135deg,#7d8cff,#6a53f2);color:#fff;font-weight:700;cursor:pointer}
    .btn:active{transform:scale(.98)}
    .small{font-size:.95rem;color:var(--muted);margin-top:12px}
  </style>
</head>
<body>
  <main class="card">
    <h1>📦 Estoque Headset</h1>
    <p class="hint" id="status">Abrindo o aplicativo…</p>
    <button class="btn" id="openBtn">Abrir agora</button>
    <p class="small">Se o redirecionamento automático não acontecer, toque em <b>Abrir agora</b>.</p>
  </main>

  <script>
    // 👉 troque aqui se mudar o link do Apps Script
    const GAS_URL = "https://script.google.com/macros/s/AKfycbwz7yRJjGNpF3ZLX-ZsLn4Tc_rrQqJJENijC5_beQRsMwYj16Ht_1qntHvGkiNmS8ceBw/exec";

    // iOS “Salvar na Tela de Início” abre em standalone; navegando com _self funciona.
    function go(){ window.location.href = GAS_URL; }
    document.getElementById('openBtn').addEventListener('click', go);

    // Tenta abrir automaticamente
    const status = document.getElementById('status');
    let tried = false;
    function autoOpen(){
      if (tried) return;
      tried = true;
      status.textContent = "Abrindo o aplicativo…";
      // replace = sem voltar para a launch page ao usar 'voltar'
      window.location.replace(GAS_URL);
    }
    // tenta rápido e depois garante com um novo disparo
    setTimeout(autoOpen, 300);
    setTimeout(()=>{ status.textContent = "Pronto para abrir."; }, 1800);

    // Registra service worker para permitir instalação como PWA no Android
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js').catch(()=>{});
      });
    }
  </script>

  <noscript>
    <meta http-equiv="refresh" content="0; url=https://script.google.com/macros/s/AKfycbwz7yRJjGNpF3ZLX-ZsLn4Tc_rrQqJJENijC5_beQRsMwYj16Ht_1qntHvGkiNmS8ceBw/exec">
  </noscript>
</body>
</html>
